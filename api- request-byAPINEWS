import requests

def obter_noticias(termo_busca):
    url = f'https://newsapi.org/v2/everything?q={termo_busca}&apiKey=55724dee39ce442594357301300d1f52'
    try:
        resposta = requests.get(url)
        resposta.raise_for_status()  # Levanta um erro se a resposta não for 200

        dados = resposta.json()
        
        # Verifica se a chave 'articles' existe na resposta
        if 'articles' in dados:
            noticias = dados['articles']
            for noticia in noticias:
                print(f"Título: {noticia['title']}")
                print(f"Fonte: {noticia['source']['name']}")
                print(f"URL: {noticia['url']}")
                print('-' * 80)
        else:
            print("Nenhuma notícia encontrada para o termo de busca.")
    
    except requests.exceptions.RequestException as e:
        print(f"Erro ao fazer a requisição: {e}")
    except Exception as e:
        print(f"Ocorreu um erro: {e}")

# Exemplo de uso:
termo_busca = "Windows Server 2022"  # Substitua pelo ativo que você está monitorando
obter_noticias(termo_busca)
